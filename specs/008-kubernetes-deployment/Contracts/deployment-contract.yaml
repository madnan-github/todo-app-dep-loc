# Kubernetes Deployment Contract for TodoFlow Application

openapi: 3.0.0
info:
  title: TodoFlow Kubernetes Deployment Contract
  description: API contract for deploying TodoFlow application to Kubernetes
  version: 1.0.0

paths:
  /api/deployments/todo-frontend:
    get:
      summary: Get frontend deployment status
      responses:
        '200':
          description: Frontend deployment status
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: "todo-frontend"
                  status:
                    type: string
                    example: "Running"
                  replicas:
                    type: integer
                    example: 1
                  ready_replicas:
                    type: integer
                    example: 1
    put:
      summary: Update frontend deployment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                replicas:
                  type: integer
                  example: 2
                image_tag:
                  type: string
                  example: "latest"
      responses:
        '200':
          description: Deployment updated successfully

  /api/deployments/todo-backend:
    get:
      summary: Get backend deployment status
      responses:
        '200':
          description: Backend deployment status
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: "todo-backend"
                  status:
                    type: string
                    example: "Running"
                  replicas:
                    type: integer
                    example: 1
                  ready_replicas:
                    type: integer
                    example: 1

  /api/services/todo-frontend:
    get:
      summary: Get frontend service information
      responses:
        '200':
          description: Frontend service details
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: "todo-frontend-service"
                  type:
                    type: string
                    example: "NodePort"
                  port:
                    type: integer
                    example: 3000
                  node_port:
                    type: integer
                    example: 30080

  /api/health:
    get:
      summary: Health check for the deployment system
      responses:
        '200':
          description: System is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "healthy"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2026-01-22T10:00:00Z"
                  checks:
                    type: object
                    properties:
                      kubernetes_cluster:
                        type: string
                        example: "connected"
                      helm_chart:
                        type: string
                        example: "deployed"
                      frontend_pod:
                        type: string
                        example: "running"
                      backend_pod:
                        type: string
                        example: "running"